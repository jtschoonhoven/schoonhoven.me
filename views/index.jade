extends layout

block content
  .container
    #expand.btn.btn-link.pull-right Toggle Sidebar
    .row
      h1 jonathan<small>.</small>schoonhoven<small>.</small>me
      p A personal website and sandbox for Node + Express + D3
      hr

    .row
      #sidebar.col-sm-3
        ul.nav.nav-pills.nav-stacked
          li(data-value='oneDValue'): a(href='#') 1D Value
          li(data-value='twoDtimeseries'): a(href='#') 2D time series
          li(data-value='threeD1colbigtable').active: a(href='#') 3D 1-col big table
          li(data-value='threeD1colwithlabels'): a(href='#') 3D 1-col labeled
          li(data-value='threeDmatrixnolabels'): a(href='#') 3D matrix no labels
          li(data-value='threeDmatrixwithlabels'): a(href='#') 3D matrix with labels
      #content.col-sm-9
        #chartTypes.btn-group.btn-group-sm
          #toJSON.btn.btn-link(data-value='json') JSON
          #toDotMatrix.btn.btn-link(data-value='dotMatrix') Dot Matrix
          #toTable.btn.btn-link.active(data-value='table') Table
        #canvas
      hr
  script

    var table = !{tableObj};
    var currentData = 'oneDValue';
    var currentType = 'table';

    draw(table[currentData].rows, currentType);

    // new chart type
    $('#chartTypes .btn').click(function(){ 
      currentType = $(this).attr('data-value');
      draw(table[currentData].rows, currentType);
      $('.btn').not(this).removeClass('active'); 
      $(this).addClass('active'); 
    });

    // new data set
    $('#sidebar li').click(function(){
      currentData = $(this).attr('data-value');
      draw(table[currentData].rows, currentType);
      $('li').not(this).removeClass('active');
      $(this).addClass('active');
      })
    
    // toggle widescreen
    $('#expand').click(function(){ 
      $('#sidebar').toggleClass('hidden'); 
      $('#content').toggleClass('col-sm-9');
      $('#content').toggleClass('col-sm-12');
      $(this).toggleClass('active'); 
    });

